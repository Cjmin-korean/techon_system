<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="../css/mesmain.css">
    <link rel="stylesheet" href="../css/mesbombass.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../js/sorttable.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />


</head>
<style>
    #bomtableBody {
        max-height: 300px;
        /* Set your desired max height here */
        overflow-y: auto;
    }

    input {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
        /* margin-bottom: 16px; */
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 15px;
        font-weight: bold;
    }

    select {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
        /* margin-bottom: 16px; */
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    .saveButton {
        background-color: whitesmoke;
        color: black;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin-left: 10px;
        cursor: pointer;

    }
</style>


<body>
    <div class="main_header">
        <img src="/img/테크온로고.PNG" style="width: 100px;" class="loadingImage">
        <a style="margin-left: 20px;">BOM(양산) 상세정보</a>
    </div>
    <div id="loadingOverlay">
        <img src="/img/테크온로고.PNG" alt="로딩 이미지" class="loadingImage">

    </div>

    <fieldset>
        <legend>검색조건</legend>
        <button class="saveButton" onclick="openEditModal()">신규추가</button>

    </fieldset>
    <div id="overlay"></div>
    <table class="styled-table" id="datatable">
        <thead id="tableHead">
            <tr>
            <tr>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(0)">BOMNO</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(1)">구분</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(2)">모델명</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(3)">품목명</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(4)">고객사</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(5)">고객사코드</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(6)">원가(￦)</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(7)">단가(￦)</th>
                <th style="text-align:center; cursor: pointer;" onclick="sortTable(8)">재료비(%)</th>

            </tr>

            </tr>
        </thead>
        <tbody id="Datatbody">

        </tbody>

    </table>
    <div id="editModal">
        <div class="mainheader">
            <h1>양산BOM 신규생성</h1>
            <!-- <button class="saveButton" onclick="opentool()">TOOL</button> -->

            <span class="close" onclick="closeModal()">&times;</span>
        </div>

        <div id="editForm">
            <table>
                <tr style="height:50px;">
                    <td colspan="11">제품 정보</td>
                    <!-- <td> </td> -->
                    <td> <button style="background-color: black; color:white;" class="saveButton"
                            onclick="Bomsave()">저장</button></td>
                </tr>

                <tr>
                    <td><label for="editAuthor">BOMNO</label></td>
                    <td><input type="text" id="bomno-save" value="" autocomplete="off"></td>
                    <td><label for="editAuthor">고객사명</label></td>
                    <td><input type="text" id="customer-save" value="" autocomplete="off"></td>
                    <td><label for="editDate">모델명</label></td>
                    <td><input type="text" id="modelname-save" value="" autocomplete="off"></td>
                    <td><label for="editDate">제품명</label></td>
                    <td><input type="text" id="itemname-save" value="" autocomplete="off"></td>

                    <td><label for="editAuthor">PCS수량</label></td>
                    <td><input type="text" style="text-align: right;" oninput="validateNumericInput(this)" id="pcs-save"
                            value="" autocomplete="off"></td>
                    <td><label for="editAuthor">Cavity</label></td>
                    <td><input type="text" style="text-align: right;" id="cavity-save" value="" autocomplete="off"
                            oninput="validateNumericInput(this); updateTaAndOrdercountInput(); updateSoyoValue(); updateRlProductInput(); updateRlcutValue();calculateCost();">
                    </td>
                </tr>

                <tr>


                    <td><label for="editDate">고객코드</label></td>
                    <td><input type="text" id="itemcode-save" value="" autocomplete="off"></td>
                    <td><label for="editDate">공정구분</label></td>
                    <td><select id="workpart-save" style="font-weight: bold;">
                            <option style="font-weight: bold; font-size: 15px;" value=""></option>
                            <option style="font-weight: bold; font-size: 15px;" value="2차피딩작업">2차피딩작업</option>
                            <option style="font-weight: bold; font-size: 15px;" value="이중피딩작업">이중피딩작업</option>
                            <option style="font-weight: bold; font-size: 15px;" value="일반피딩작업">일반피딩작업</option>
                        </select></td>
                    <td><label for="editAuthor">작업차수</label></td>
                    <td><input type="text" style="text-align: right;" id="working-save"
                            oninput="validateNumericInput(this)" value="" autocomplete="off"></td>
                    <td><label for="editDate">타발방향</label></td>
                    <td><input type="text" id="direction-save" value="" autocomplete="off"></td>

                    <td><label for="editDate">원가합계(￦)</label></td>
                    <td><input type="text" style="text-align: right; background-color: whitesmoke;" readonly
                            id="costsum-save" value="0" autocomplete="off"></td>
                    <td><label for="editAuthor">발주수량</label></td>
                    <td><input type="text" id="ordercount-save" style="text-align: right; background-color: whitesmoke;"
                            value="1" readonly autocomplete="off"></td>
                </tr>



            </table>
            <div style="width: 100%; margin: auto; overflow-x: auto;">
                <div style="height:1000px; max-height: 800px; overflow-y: auto; display: block;">

                    <table style="width: 140%; ">
                        <tr style="height:50px;">
                            <td colspan="26">작업특이사항</td>
                        </tr>
                        <tr>
                            <td colspan="26" style="max-height: 70%;">
                                <textarea id="additionalNotes" rows="3" autocomplete="off"></textarea>
                            </td>
                        </tr>
                        <tr style="height:50px;">

                            <td colspan="25">BOM 상세</td>
                            <!-- <button onclick="abcd()">abcd</button> -->
                        </tr>
                        <tr style="height: 30px;">
                            <th style="width: 90px;" rowspan="2"><button id="addRowBtn" onclick="addRow()">추가</button>
                            </th>
                            <th style="width: 50px;" rowspan="2">작업<br>차수</th>
                            <th style="width: 130px;" rowspan="2">메인자재</th>
                            <th style="width: 200px;" rowspan="2">원자재명</th>
                            <th rowspan="2" style="width: 400px;">자재별 특이사항</th>
                            <th style="width: 70px;">원단폭</th>
                            <th style="width: 70px;">사용가능폭</th>
                            <th style="width: 70px;">1차피딩</th>
                            <th style="width: 70px;">2차피딩</th>
                            <th style="width: 120px;">소요량</th>
                            <th style="width: 70px;">타</th>
                            <th style="width: 70px;">All타</th>
                            <th style="width: 70px;">타길이</th>
                            <th style="width: 70px;">LOSS</th>
                            <th style="width: 120px;">원가</th>
                            <th style="width: 70px;">1R/L<br>컷팅수량</th>
                            <th style="width: 70px;">1R/L<br>생산수량</th>
                            <th style="width: 70px;">전폭</th>
                            <th style="width: 70px;">유효폭</th>
                            <th style="width: 70px;">길이</th>
                            <th style="width: 70px;">SQM<br>단가</th>
                            <th style="width: 70px;">롤단가</th>
                            <th style="width: 70px;" rowspan="2">단위</th>
                            <th style="width: 130px;" rowspan="2">제조사</th>
                            <th style="width: 130px;" rowspan="2">공급사</th>
                            <!-- 전폭/유효폭/길이/SQM단가/롤단가/단위/제조사/공급사 -->

                        </tr>

                        <tr style="height: 30px;">

                            <th>mm</th>
                            <th>mm</th>
                            <th>mm</th>
                            <th>mm</th>
                            <th>M</th>
                            <th>타수</th>
                            <th>타수</th>
                            <th>mm</th>
                            <th>%</th>
                            <th>￦</th>
                            <th>Roll</th>
                            <th>EA</th>
                            <th>mm</th>
                            <th>mm</th>
                            <th>M</th>
                            <th>￦</th>
                            <th>￦</th>

                        </tr>
                        <tbody id="bomtableBody" style="height: 100%;">
                            <tr>
                                <td><button id="deleteRowBtn" style="background-color: red; color:white;">삭제</button>
                                </td>
                                <td><input type="text" id="char-input" style="text-align:right;" value="1"
                                        autocomplete="off">
                                </td>
                                <td><select id="main-input">
                                        <option value=""></option>
                                        <option value="메인자재">메인자재</option>
                                    </select></td>
                                <td><input type="text" id="materialname-input"
                                        style="background-color: whitesmoke; cursor: pointer;" readonly
                                        ondblclick="handleDoubleClick();" value="" autocomplete="off"></td>
                                <td><input type="text" id="etc-input" value="" autocomplete="off"></td>
                                <td><input type="text" style="text-align:right;" id="materialwidth-input"
                                        oninput="updateSoyoValue(); updateRlProductInput(); updateRlcutValue();calculateCost();"
                                        value="" autocomplete="off"></td>
                                <td><input type="text" style="text-align:right;" id="use-input" value=""
                                        autocomplete="off">
                                </td>
                                <td>
                                    <input type="text" style="text-align:right;" id="onepidding-input"
                                        oninput="formatDecimalInput(this, 2); updateSoyoValue(); updateRlProductInput(); updateRlcutValue();calculateCost();"
                                        value="0" autocomplete="off">
                                </td>

                                <td><input type="text" style="text-align:right;" id="twopidding-input"
                                        oninput="formatDecimalInput(this, 2); updateSoyoValue(); updateRlProductInput(); updateRlcutValue();calculateCost();"
                                        value="0" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;"
                                        id="soyo-input" value="0" autocomplete="off" readonly>
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="ta-input" oninput="updateSoyoValue()" value="1" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right;" id="allta-input"
                                        oninput="updateSoyoValue(); updateRlProductInput(); formatDecimalInput(this, 2);"
                                        value="1" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right;" id="talength-input"
                                        oninput="formatDecimalInput(this, 2); updateSoyoValue(); updateRlProductInput()"
                                        value="0" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right;" id="loss-input" value="3"
                                        oninput="updateSoyoValue(); updateRlProductInput(); formatDecimalInput(this, 2);"
                                        autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;"
                                        oninput="formatDecimalInput(this, 2); calculateCost();" id="cost-input"
                                        value="0" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="rlcut-input" value="" oninput="updateRlProductInput()" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="rlproduct-input" oninput="updateRlProductInput()" value=""
                                        autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="width-input" value="" autocomplete="off"></td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="usewidth-input" oninput="updateRlcutValue()" value="" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="length-input" oninput="updateRlProductInput()" value="" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="sqmprice-input" value="" autocomplete="off"></td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="rollprice-input" value="" autocomplete="off">
                                </td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="unit-input" value="" autocomplete="off"></td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="manufacterer-input" value="" autocomplete="off"></td>
                                <td><input type="text" style="text-align:right; background-color: whitesmoke;" readonly
                                        id="supplier-input" value="" autocomplete="off"></td>
                            </tr>



                        </tbody>


                    </table>
                </div>
            </div>

        </div>
    </div>
    <div id="editModal1">
        <div class="mainheader">
            <h1>TOOL관리</h1>
            <button class="saveButton" onclick="saveChanges()">저장</button>
            <span class="close" onclick="closeModal1()">&times;</span>
        </div>

        <div id="editForm">
            <table class="tooltable" style="float: left;">
                <tr style="height:50px;">
                    <td colspan="16">TOOL 정보</td>
                </tr>
                <tr>
                    <th style="width:70px;">구분</th>
                    <th colspan="3">1차</th>
                    <th colspan="3">2차</th>
                    <th colspan="3">3차</th>
                    <th colspan="3">4차</th>
                    <th colspan="3">5차</th>

                </tr>
                <tr>
                    <td>설비명</td>
                    <td colspan="3"><select>
                            <option>고속1호기</option>
                            <option>고속2호기</option>
                            <option>고속3호기</option>
                            <option>고속4호기</option>
                            <option>고속5호기</option>
                            <option>고속6호기</option>
                            <option>고속7호기(1)</option>
                            <option>고속7호기(2)</option>
                            <option>고속8호기(1)</option>
                            <option>고속8호기(2)</option>
                            <option>고속9호기(1)</option>
                            <option>고속9호기(2)</option>
                            <option>고속10호기(1)</option>
                            <option>고속10호기(2)</option>
                            <option>고속11호기(1)</option>
                            <option>고속11호기(2)</option>
                            <option>고속12호기(1)</option>
                            <option>고속12호기(2)</option>
                            <option>고속13호기(1)</option>
                            <option>고속13호기(2)</option>
                            <option>고속14호기(1)</option>
                            <option>고속14호기(2)</option>
                            <option>고속15호기(1)</option>
                            <option>고속15호기(2)</option>
                            <option>유압1호기</option>
                            <option>유압2호기</option>
                            <option>유압3호기</option>
                            <option>유압4호기</option>
                            <option>유압5호기</option>
                        </select></td>
                    <td colspan="3"><select>
                            <option>고속1호기</option>
                            <option>고속2호기</option>
                            <option>고속3호기</option>
                            <option>고속4호기</option>
                            <option>고속5호기</option>
                            <option>고속6호기</option>
                            <option>고속7호기(1)</option>
                            <option>고속7호기(2)</option>
                            <option>고속8호기(1)</option>
                            <option>고속8호기(2)</option>
                            <option>고속9호기(1)</option>
                            <option>고속9호기(2)</option>
                            <option>고속10호기(1)</option>
                            <option>고속10호기(2)</option>
                            <option>고속11호기(1)</option>
                            <option>고속11호기(2)</option>
                            <option>고속12호기(1)</option>
                            <option>고속12호기(2)</option>
                            <option>고속13호기(1)</option>
                            <option>고속13호기(2)</option>
                            <option>고속14호기(1)</option>
                            <option>고속14호기(2)</option>
                            <option>고속15호기(1)</option>
                            <option>고속15호기(2)</option>
                            <option>유압1호기</option>
                            <option>유압2호기</option>
                            <option>유압3호기</option>
                            <option>유압4호기</option>
                            <option>유압5호기</option>
                        </select></td>
                    <td colspan="3"><select>
                            <option>고속1호기</option>
                            <option>고속2호기</option>
                            <option>고속3호기</option>
                            <option>고속4호기</option>
                            <option>고속5호기</option>
                            <option>고속6호기</option>
                            <option>고속7호기(1)</option>
                            <option>고속7호기(2)</option>
                            <option>고속8호기(1)</option>
                            <option>고속8호기(2)</option>
                            <option>고속9호기(1)</option>
                            <option>고속9호기(2)</option>
                            <option>고속10호기(1)</option>
                            <option>고속10호기(2)</option>
                            <option>고속11호기(1)</option>
                            <option>고속11호기(2)</option>
                            <option>고속12호기(1)</option>
                            <option>고속12호기(2)</option>
                            <option>고속13호기(1)</option>
                            <option>고속13호기(2)</option>
                            <option>고속14호기(1)</option>
                            <option>고속14호기(2)</option>
                            <option>고속15호기(1)</option>
                            <option>고속15호기(2)</option>
                            <option>유압1호기</option>
                            <option>유압2호기</option>
                            <option>유압3호기</option>
                            <option>유압4호기</option>
                            <option>유압5호기</option>
                        </select></td>
                    <td colspan="3"><select>
                            <option>고속1호기</option>
                            <option>고속2호기</option>
                            <option>고속3호기</option>
                            <option>고속4호기</option>
                            <option>고속5호기</option>
                            <option>고속6호기</option>
                            <option>고속7호기(1)</option>
                            <option>고속7호기(2)</option>
                            <option>고속8호기(1)</option>
                            <option>고속8호기(2)</option>
                            <option>고속9호기(1)</option>
                            <option>고속9호기(2)</option>
                            <option>고속10호기(1)</option>
                            <option>고속10호기(2)</option>
                            <option>고속11호기(1)</option>
                            <option>고속11호기(2)</option>
                            <option>고속12호기(1)</option>
                            <option>고속12호기(2)</option>
                            <option>고속13호기(1)</option>
                            <option>고속13호기(2)</option>
                            <option>고속14호기(1)</option>
                            <option>고속14호기(2)</option>
                            <option>고속15호기(1)</option>
                            <option>고속15호기(2)</option>
                            <option>유압1호기</option>
                            <option>유압2호기</option>
                            <option>유압3호기</option>
                            <option>유압4호기</option>
                            <option>유압5호기</option>
                        </select></td>
                    <td colspan="3"><select>
                            <option>고속1호기</option>
                            <option>고속2호기</option>
                            <option>고속3호기</option>
                            <option>고속4호기</option>
                            <option>고속5호기</option>
                            <option>고속6호기</option>
                            <option>고속7호기(1)</option>
                            <option>고속7호기(2)</option>
                            <option>고속8호기(1)</option>
                            <option>고속8호기(2)</option>
                            <option>고속9호기(1)</option>
                            <option>고속9호기(2)</option>
                            <option>고속10호기(1)</option>
                            <option>고속10호기(2)</option>
                            <option>고속11호기(1)</option>
                            <option>고속11호기(2)</option>
                            <option>고속12호기(1)</option>
                            <option>고속12호기(2)</option>
                            <option>고속13호기(1)</option>
                            <option>고속13호기(2)</option>
                            <option>고속14호기(1)</option>
                            <option>고속14호기(2)</option>
                            <option>고속15호기(1)</option>
                            <option>고속15호기(2)</option>
                            <option>유압1호기</option>
                            <option>유압2호기</option>
                            <option>유압3호기</option>
                            <option>유압4호기</option>
                            <option>유압5호기</option>
                        </select></td>

                </tr>
                <tr>
                    <td></td>
                    <td>피나클</td>
                    <td>금형</td>
                    <td style="width:100px;">폐기여부</td>
                    <td>피나클</td>
                    <td>금형</td>
                    <td style="width:100px;">폐기여부</td>
                    <td>피나클</td>
                    <td>금형</td>
                    <td style="width:100px;">폐기여부</td>
                    <td>피나클</td>
                    <td>금형</td>
                    <td style="width:100px;">폐기여부</td>
                    <td>피나클</td>
                    <td>금형</td>
                    <td style="width:100px;">폐기여부</td>


                </tr>
                <tr>
                    <td></td>
                    <td><input type="text" value="TEST-11"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text" value="TEST-21"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>


                </tr>
                <tr>
                    <td></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text" value="TEST-22"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><select>
                            <option></option>
                            <option>사용</option>
                            <option>폐기</option>
                            <option>보류</option>
                        </select></td>


                </tr>


            </table>

        </div>
    </div>
    <div id="overlay2"></div>
    <div id="materialnamesearch">
        <div class="mainheader">
            <h1>원자재 검색</h1>
            <span class="close" onclick="materialnamesearchcloseModal()">&times;</span>
            <input type="text" id="numericPart" style="width: 20px; visibility: hidden;">
        </div>
        <input type="text" id="materialnameinput" placeholder="자재명을 입력하세요" style="font-size: 16px; font-weight: bold;"
            onkeydown="handleEnterKey(event)" autocomplete="off">

        <div style="height:600px; max-height: 600px; overflow-y: auto;">
            <table class="styled-table" id="datatable">
                <thead>
                    <tr>
                        <th style="width: auto; text-align: center;" onclick="sortTable(0)">자재명</th>
                        <th style="width: auto; text-align: center;" onclick="sortTable(1)">자재폭(mm)</th>
                        <th style="width: auto; text-align: center;" onclick="sortTable(2)">길이(M)</th>
                        <th style="width: auto; text-align: center;" onclick="sortTable(3)">제조사</th>
                    </tr>
                </thead>
                <tbody id="searchingmaterialinfobody">

                </tbody>
            </table>
        </div>

    </div>


    <div id="editModal2">
        <div class="mainheader">
            <h1>양산BOM 상세정보</h1>
            <button class="saveButton" onclick="opentool()">TOOL</button>
            <button class="saveButton" onclick="saveChanges()">저장</button>
            <span class="close" onclick="closeModal2()">&times;</span>
        </div>

        <div id="editForm">
            <table style="float: left;">
                <tr style="height:50px;">
                    <td colspan="2">제품 정보</td>
                </tr>
                <tr>
                    <th>구분</th>
                    <th>입력정보</th>
                </tr>
                <tr>
                    <td><label for="editAuthor">BOMNO</label></td>
                    <td><input type="text" id="bomno-edit" value="" autocomplete="off"></td>
                </tr>
                <tr>
                    <td><label for="editDate">모델명</label></td>
                    <td><input type="text" id="modelname-edit" value="" autocomplete="off"></td>
                </tr>
                <tr>
                    <td><label for="editAuthor">고객사명</label></td>
                    <td><input type="text" id="customer-edit" value="" autocomplete="off"></td>
                </tr>
                <tr>
                    <td><label for="editDate">제품명</label></td>
                    <td><input type="text" id="itemname-edit" value="" autocomplete="off"></td>
                </tr>
                <tr>
                    <td><label for="editAuthor">PCS수량</label></td>
                    <td><input type="text" id="pcs-edit" value="" autocomplete="off"></td>
                </tr>
                <tr>
                    <td><label for="editDate">고객코드</label></td>
                    <td><input type="text" id="itemcode-edit" value="" autocomplete="off"></td>
                </tr>
                <tr>
                    <td><label for="editAuthor">작업공정</label></td>
                    <td><input type="text" id="working-edit" value="" autocomplete="off"></td>
                </tr>

                <tr>
                    <td><label for="editDate">타발방향</label></td>
                    <td><input type="text" id="direction-edit" value="" autocomplete="off"></td>
                </tr>
                <!-- <tr style="height:50px;">
                    <td colspan="2">작업특이사항</td>
                </tr>
                <tr>
                    <td colspan="2" style="max-height: 70%;">
                        <textarea id="additionalNotes" rows="15" autocomplete="off"></textarea>
                    </td>
                </tr> -->
            </table>
            <table style="float: left; width:70%">
                <tr style="height:50px;">
                    <td colspan="8">제품BOM 소요정보</td>
                </tr>
                <tr style="height: 30px;">
                    <th style="width: 100px;" rowspan="2">차수</th>
                    <th style="width: 150px;" rowspan="2">원자재명</th>
                    <th rowspan="2" style="width: 500px;">자재별 특이사항</th>
                    <th style="width: 100px;">원단폭 </th>
                    <th style="width: 100px;">사용가능폭</th>
                    <th style="width: 100px;">1차피딩 </th>
                    <th style="width: 100px;">2차피딩 </th>

                </tr>
                <tr style="height: 30px;">

                    <th>mm </th>
                    <th>mm </th>
                    <th>mm </th>
                    <th>mm </th>


                </tr>
                <tr>
                    <td><input type="text" id="modelname-save" value="" autocomplete="off"></td>
                    <td><input type="text" id="modelname-save" value="" autocomplete="off"></td>
                    <td><input type="text" id="modelname-save" value="" autocomplete="off"></td>
                    <td><input style="text-align:right;" type="text" id="modelname-save" value="" autocomplete="off">
                    </td>
                    <td><input style="text-align:right;" type="text" id="modelname-save" value="" autocomplete="off">
                    </td>
                    <td><input style="text-align:right;" type="text" id="modelname-save" value="" autocomplete="off">
                    </td>
                    <td><input style="text-align:right;" type="text" id="modelname-save" value="" autocomplete="off">
                    </td>

                </tr>

            </table>
        </div>
    </div>



    <script>
        var server = '';

        if (window.location.hostname == 'localhost') {
            server = 'http://localhost:8080';
        } else {
            server = 'http://techonmes.co.kr';
        }
        var clickedRowIndex; // variable to store the clicked row index
        $(document).ready(function () {

            showLoading()
            load()
            $('#Datatbody').on('dblclick', 'tr', function () {
                openEditModal2(this);
            });



            // $(document).on('dblclick', '#materialname-input', function () {
            //     clickedRowIndex = $(this).index();
            //     handleDoubleClick();
            // });
        });

        function openEditModal2(row) {
            var rowData = $(row).find('td').map(function () {
                return $(this).text();
            }).get();
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('editModal2').style.display = 'block';

            $('#bomno-edit').val(rowData[0]);
            $('#modelname-edit').val(rowData[2]);
            $('#itemname-edit').val(rowData[3]);
            $('#customer-edit').val(rowData[4]);
            $('#itemcode-edit').val(rowData[5]);

            $('#working-edit').val(rowData[9]);
            $('#direction-edit').val(rowData[20]);
            $('#pcs-edit').val(rowData[21]);
        }


        function openEditModal() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('editModal').style.display = 'block';
        }
        function opentool() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('editModal1').style.display = 'block';
        }

        function openEditModal(row) {
            var rowData = $(row).find('td').map(function () {
                return $(this).text();
            }).get();

            // Display overlay
            $('#overlay').fadeIn();

            $('#editModal').fadeIn();
        }


        // Function to close edit modal and overlay
        function closeModal() {
            $('#overlay').fadeOut();
            $('#editModal').fadeOut();
        }
        function closeModal1() {
            $('#editModal1').fadeOut();
        }
        function closeModal2() {
            $('#overlay').fadeOut();
            $('#editModal2').fadeOut();
        }
        function materialnamesearchcloseModal() {
            $('#materialnamesearch').fadeOut();
        }

        function showLoading() {
            var loadingOverlay = document.getElementById("loadingOverlay");
            loadingOverlay.style.display = "flex";
            setTimeout(function () {
                loadingOverlay.style.display = "none";
            }, 1000);
        }




        function Dataedit() {
            if (confirm("고객사 정보를 수정 하시겠습니까??") == true) {

                $.ajax({
                    type: 'POST',
                    url: server + '/api/accountupdatedata',
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify({

                        id: $('#id-edit').val(),
                        accountcode: $('#accountcode-edit').val(),
                        accountname: $('#accountname-edit').val(),
                        representativename: $('#representativename-edit').val(),
                        phone: $('#phone-edit').val(),
                        adress: $('#adress-edit').val(),
                        number: $('#number-edit').val(),
                        mobile: $('#mobile-edit').val(),
                        fax: $('#fax-edit').val(),
                        email: $('#email-edit').val(),
                        etc: $('#etc-edit').val()




                    }),
                    success: function (result) {
                    }
                })

                $('#popupOverlay1').fadeOut();
                setTimeout(function () {
                    load()
                }, 50); // 3초 후에 알림을 사라지게 설정
                var notification = $('<div class="notification"><img src="/img/테크온로고.PNG" alt="Notification Icon"><span class="notification-message" style="color:navy;">거래처 수정 완료</span></div>');
                $('body').append(notification);
                setTimeout(function () {
                    notification.fadeOut(function () {
                        $(this).remove();
                    });
                }, 3000);
            } else {
                return false;
            }
        }

        function load() {
            $('#Datatbody').empty();
            $.ajax({
                type: 'POST',
                url: server + '/api/iteminfobom',
                dataType: 'json',
                success: function (data) {
                    for (var i = 0; i < data.length; i++) {
                        var updatedate = data[i].updatedate !== null ? data[i].updatedate : '';

                        var fontColor = data[i].status === '미사용' ? 'silver' : ''; // Check status and set font color

                        $('#Datatbody').append(
                            '<tr style="color: ' + fontColor + ';">' +
                            '<td>' + data[i].BOMNO + '</td>' +
                            '<td>' + data[i].PART + '</td>' +
                            '<td>' + data[i].MODELNAME + '</td>' +
                            '<td>' + data[i].ITEMNAME + '</td>' +
                            '<td>' + data[i].CUSTOMER + '</td>' +
                            '<td>' + data[i].ITEMCODE + '</td>' +
                            '<td style="text-align:right;">' + data[i].TOTALCOST + '</td>' +
                            '<td style="text-align:right;">' + data[i].ITEMPRICE + '</td>' +
                            '<td style="text-align:right;">' + data[i].COSTPRICERATIO + '</td>' +
                           
                            '</tr>'
                        );

                    
                    }
                }
            });
        }


        function handleDoubleClick() {
            document.getElementById('materialnamesearch').style.display = 'block';
            $('#searchingmaterialinfobody').empty()
            $("#materialnameinput").val('')
            $("#materialnameinput").focus()

            var currentRow = $(event.target).closest('tr');

            var rowIndex = currentRow.index();

            $("#numericPart").val(rowIndex)

        }

        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                $('#searchingmaterialinfobody').empty();
                $.ajax({
                    type: 'POST',
                    url: server + '/api/searchingmaterialname',
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify({

                        materialname: $('#materialnameinput').val()

                    }),
                    success: function (result) {
                        for (var i = 0; i < result.length; i++) {


                            $('#searchingmaterialinfobody').append(
                                '<tr onclick="insertmaterialdata(this)">' +
                                '<td>' + result[i].materialname + '</td>' +
                                '<td style="text-align:right;">' + result[i].width.toLocaleString() + '</td>' +
                                '<td style="text-align:right;">' + result[i].length.toLocaleString() + '</td>' +
                                '<td>' + result[i].manufacterer + '</td>' +
                                '<td id="data-width">' + result[i].width.toLocaleString() + '</td>' +
                                '<td id="data-usewidth">' + result[i].usewidth.toLocaleString() + '</td>' +
                                '<td id="data-length">' + result[i].length.toLocaleString() + '</td>' +
                                '<td id="data-sqmprice">' + result[i].sqmprice.toLocaleString() + '</td>' +
                                '<td id="data-rollprice">' + result[i].rollprice.toLocaleString() + '</td>' +
                                '<td id="data-unit">' + result[i].unit + '</td>' +
                                '<td id="data-manufacterer">' + result[i].manufacterer + '</td>' +
                                '<td id="data-supplier">' + result[i].supplier + '</td>' +

                                '</tr>'
                            );

                            $("td#data-width").hide();
                            $("td#data-usewidth").hide();
                            $("td#data-length").hide();
                            $("td#data-sqmprice").hide();
                            $("td#data-rollprice").hide();
                            $("td#data-unit").hide();
                            $("td#data-manufacterer").hide();
                            $("td#data-supplier").hide();
                            // $("td#data-cost").hide();
                            // $("td#data-minus").hide();
                            // $("td#data-itemprice").hide();
                            // $("td#data-status").hide();
                            // $("td#data-direction").hide();
                            // $("td#data-pcs").hide();
                        }
                    }
                });
            }
        }
        function insertmaterialdata(row) {
            document.getElementById('materialnamesearch').style.display = 'none';
            var rowData = $(row).find('td').map(function () {
                return $(this).text();
            }).get();

            // Assuming rowIndex is the index of the row where you want to update the materialname-input
            var rowIndex = $('#numericPart').val()

            // Update the materialname-input in the specified row
            $('#bomtableBody tr:eq(' + rowIndex + ') #materialname-input').val(rowData[0]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #width-input').val(rowData[4]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #usewidth-input').val(rowData[5]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #length-input').val(rowData[6]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #sqmprice-input').val(rowData[7]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #rollprice-input').val(rowData[8]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #unit-input').val(rowData[9]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #manufacterer-input').val(rowData[10]);
            $('#bomtableBody tr:eq(' + rowIndex + ') #supplier-input').val(rowData[11]);

            $('#bomtableBody tr:eq(' + rowIndex + ') #rlcut-input').val(
                Math.floor(
                    parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #usewidth-input').val().replace(/,/g, '')) /
                    parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #materialwidth-input').val().replace(/,/g, ''))
                )
            );
            let lengthValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #length-input').val())
            let rlcutValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #rlcut-input').val())
            let cavitySaveValue = parseFloat($('#cavity-save').val())
            let onepiddingValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #onepidding-input').val())
            let taLengthValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #talength-input').val())
            let twopiddingValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #twopidding-input').val())
            let alltaValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #allta-input').val())
            let lossValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #loss-input').val())

            // Calculate rlproduct-input value
            let rlproductValue = ((lengthValue * 1000 * rlcutValue * cavitySaveValue * (1 + (lossValue / 100))) / ((onepiddingValue + taLengthValue + twopiddingValue) / alltaValue)).toFixed(0);

            // Update rlproduct-input value
            $('#bomtableBody tr:eq(' + rowIndex + ') #rlproduct-input').val(rlproductValue);

            const rollpriceInput = $('#bomtableBody tr:eq(' + rowIndex + ') #rollprice-input');
            const rollpriceValue = parseFloat(rollpriceInput.val().replace(/,/g, '')) || 0;

            // Calculate cost value
            const costValue = rollpriceValue / rlproductValue;

            // Update cost-input value
            $('#bomtableBody tr:eq(' + rowIndex + ') #cost-input').val(costValue.toFixed(2));

        }

        // function insertmaterialdata(row) {
        //     document.getElementById('materialnamesearch').style.display = 'none';
        //     var rowData = $(row).find('td').map(function () {
        //         return $(this).text();
        //     }).get();

        //     // Set the values for the inputs in the specified row using the stored rowIndex
        //     $("#materialname-input-" + $('#numericPart').val()).val(rowData[0]);
        //     $("#width-input-" + $('#numericPart').val()).val(rowData[4]);
        //     $("#usewidth-input-" + $('#numericPart').val()).val(rowData[5]);
        //     $("#length-input-" + $('#numericPart').val()).val(rowData[6]);
        //     $("#sqmprice-input-" + $('#numericPart').val()).val(rowData[7]);
        //     $("#rollprice-input-" + $('#numericPart').val()).val(rowData[8]);
        //     $("#unit-input-" + $('#numericPart').val()).val(rowData[9]);
        //     $("#manufacterer-input-" + $('#numericPart').val()).val(rowData[10]);
        //     $("#supplier-input-" + $('#numericPart').val()).val(rowData[11]);

        //     // Clear the stored rowIndex after use
        //     clickedRowIndex = undefined;
        // }


        //컷수 구하기
        function updateRlcutValue() {
            var currentRow = $(event.target).closest('tr');
            var rowIndex = currentRow.index();
            $('#bomtableBody tr:eq(' + rowIndex + ') #rlcut-input').val(
                Math.floor(
                    parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #usewidth-input').val().replace(/,/g, '')) /
                    parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #materialwidth-input').val().replace(/,/g, ''))
                )
            );
        }
        //소요량구하기
        function updateSoyoValue() {
            var currentRow = $(event.target).closest('tr');
            var rowIndex = currentRow.index();
            const taValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #ta-input').val().replace(/,/g, '')) || 0;
            const onepiddingValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #onepidding-input').val().replace(/,/g, '')) || 0;
            const taLengthValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #talength-input').val().replace(/,/g, '')) || 0;
            const twopiddingValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #twopidding-input').val().replace(/,/g, '')) || 0;
            const alltaValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #allta-input').val().replace(/,/g, '')) || 0;
            const lossValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #loss-input').val().replace(/,/g, '')) || 0;

            let soyoValue = (taValue * ((onepiddingValue + taLengthValue + twopiddingValue) / alltaValue) * 0.001 * (1 + (lossValue / 100))).toFixed(4);

            soyoValue = soyoValue.replace(/\.?0+$/, '');

            $('#bomtableBody tr:eq(' + rowIndex + ') #soyo-input').val(soyoValue);
        }
        //1RL생산수량 구하기
        function updateRlProductInput() {
            var currentRow = $(event.target).closest('tr');
            var rowIndex = currentRow.index();
            let lengthValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #length-input').val())
            let rlcutValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #rlcut-input').val())
            let cavitySaveValue = parseFloat($('#cavity-save').val())
            let onepiddingValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #onepidding-input').val())
            let taLengthValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #talength-input').val())
            let twopiddingValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #twopidding-input').val())
            let alltaValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #allta-input').val())
            let lossValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #loss-input').val())

            // Calculate rlproduct-input value
            let rlproductValue = ((lengthValue * 1000 * rlcutValue * cavitySaveValue * (1 + (lossValue / 100))) / ((onepiddingValue + taLengthValue + twopiddingValue) / alltaValue)).toFixed(0);

            // Update rlproduct-input value
            $('#bomtableBody tr:eq(' + rowIndex + ') #rlproduct-input').val(rlproductValue);
            calculateCost();
        }


        function validateNumericInput(input) {
            // 숫자만입력
            input.value = input.value.replace(/[^0-9]/g, '');
        }
        function formatDecimalInput(input, decimalPlaces) {
            // 소수두째짜리까지만 입력가능
            input.value = input.value.replace(/[^0-9.]/g, '');
            const parts = input.value.split('.');
            if (parts.length > 1) {
                input.value = `${parts[0]}.${parts[1].slice(0, decimalPlaces)}`;
            }
        }
        function updateTaAndOrdercountInput() {

            const cavitySaveValue = parseFloat(document.getElementById("cavity-save").value) || 0;
            const taInputValue = cavitySaveValue !== 0 ? (1 / cavitySaveValue) : 0;
            document.getElementById("ordercount-save").value = cavitySaveValue;

        }

        function calculateCost() {
            var currentRow = $(event.target).closest('tr');
            var rowIndex = currentRow.index();
            // Get the values of input fields within the specified row
            const rollpriceInput = $('#bomtableBody tr:eq(' + rowIndex + ') #rollprice-input');
            const rollpriceValue = parseFloat(rollpriceInput.val().replace(/,/g, '')) || 0;
            const rlproductValue = parseFloat($('#bomtableBody tr:eq(' + rowIndex + ') #rlproduct-input').val().replace(/,/g, '')) || 1; // Default to 1 to avoid division by zero

            // Calculate cost value
            const costValue = rollpriceValue / rlproductValue;

            // Update cost-input value
            $('#bomtableBody tr:eq(' + rowIndex + ') #cost-input').val(costValue.toFixed(2));


        }

        $(document).on('click', '#deleteRowBtn', function () {
            var currentRow = $(this).closest('tr');
            var tbodyLength = $('#bomtableBody').find('tr').length;
            if (tbodyLength > 1) {
                currentRow.remove();
            } else {
                alert('첫 행은 삭제 불가능 합니다.');
            }
        });



        // Initialize the counter outside the function
        var bomnoCounter = 0;

        // Initialize the counter outside the function
        var bomnoCounter = 0;

        function addRow() {
            // Clone the template row
            var newRow = $('#bomtableBody tr:first').clone();

            // Increment the counter for bomno-input

            // Append the new row to the table body
            $('#bomtableBody').append(newRow);
            // Get the index of the new row (length gives the number of elements, which is the new row index)
            var rowIndex = $('#bomtableBody tr').length - 1;

            // Update the IDs of the new row inputs
            newRow.find('input').each(function () {
                var originalId = $(this).attr('id');
                var newId = originalId.replace(/\d+$/, rowIndex);
                $(this).attr('id', newId);
            });


            newRow.find('#char-input').val($('#char-input:last').val());
            newRow.find('#onepidding-input').val($('#onepidding-input:first').val());
            newRow.find('#twopidding-input').val($('#twopidding-input:first').val());
            newRow.find('#ta-input').val($('#ta-input:first').val());
            newRow.find('#allta-input').val($('#allta-input:first').val());
            newRow.find('#loss-input').val($('#loss-input:first').val());
            newRow.find('#talength-input').val($('#talength-input:first').val());
            newRow.find('#cost-input').val('0');
            newRow.find('#rlcut-input').val('');
            newRow.find('#rlproduct-input').val('');
            newRow.find('#materialname-input').val('');
            newRow.find('#width-input').val('');
            newRow.find('#usewidth-input').val('');
            newRow.find('#length-input').val('');
            newRow.find('#sqmprice-input').val('');
            newRow.find('#rollprice-input').val('');
            newRow.find('#unit-input').val('');
            newRow.find('#manufacterer-input').val('');
            newRow.find('#supplier-input').val('');
        }
        function Bomsave() {
            var insertdate = new Date().toISOString().slice(0, 10);

            var bomno = $('#bomno-save').val();
            var customer = $('#customer-save').val();
            var modelname = $('#modelname-save').val();
            var itemname = $('#itemname-save').val();
            var pcs = $('#pcs-save').val();
            var cavity = $('#cavity-save').val();
            var itemcode = $('#itemcode-save').val();
            var workpart = $('#workpart-save').val();
            var working = $('#working-save').val();
            var direction = $('#direction-save').val();
            var costsum = $('#costsum-save').val();
            var ordercount = $('#ordercount-save').val();
            var additionalnotes = $('#additionalNote').val();

            if (
                bomno !== '' && customer !== '' && modelname !== '' && itemname !== '' && pcs !== '' &&
                cavity !== '' && itemcode !== '' && workpart !== '' && working !== '' && direction !== '' &&
                costsum !== '' && ordercount !== '' && additionalnotes !== ''
            ) {
                if (confirm("BOM정보(양산) 데이터를 저장하시겠습니까?") == true) {
                    $.ajax({
                        type: 'POST',
                        url: server + '/api/bommasssaveiteminfo',
                        dataType: 'json',
                        contentType: 'application/json',
                        data: JSON.stringify({
                            "insertdate": insertdate,
                            "updatedate": insertdate,
                            "bomno": bomno,
                            "customer": customer,
                            "modelname": modelname,
                            "itemname": itemname,
                            "pcs": pcs,
                            "cavity": cavity,
                            "itemcode": itemcode,
                            "part": "양산",
                            "workpart": workpart,
                            "working": working,
                            "direction": direction,
                            "costsum": costsum,
                            "ordercount": ordercount,
                            "additionalnotes": additionalnotes,
                            "itemprice":'0'
                        }),
                        success: function (result) {
                            // Handle success
                        }
                    });

                    $('[id^="materialname-input"]').each(function (index) {
                        var using = ($('[id^="use-input"]').eq(index).val());
                        var etc = $('[id^="etc-input"]').eq(index).val();

                        var bomno = $('#bomno-save').val();
                        var materialname = $(this).val();
                        var model = $('#model-save').val();
                        var itemname = $('#itemname-save').val();
                        var char = $('[id^="char-input"]').eq(index).val();
                        var materialwidth = ($('[id^="materialwidth-input"]').eq(index).val())
                        var onepid = ($('[id^="onepid-input"]').eq(index).val())
                        var twopid = ($('[id^="twopid-input"]').eq(index).val())
                        var soyo = ($('[id^="soyo-input"]').eq(index).val())
                        var ta = ($('[id^="ta-input"]').eq(index).val())
                        var allta = ($('[id^="allta-input"]').eq(index).val())
                        var talength = ($('[id^="talength-input"]').eq(index).val())
                        var loss = ($('[id^="loss-input"]').eq(index).val())
                        var main = ($('[id^="main-input"]').eq(index).val())
                        var cost = ($('[id^="cost-input"]').eq(index).val())
                        var rlcut = ($('[id^="rlcut-input"]').eq(index).val())
                        var rlproduct = ($('[id^="rlproduct-input"]').eq(index).val())
                        var width = parseFloat($('[id^="width-input"]').eq(index).val().replace(/,/g, '')) || 0;
                        var length = parseFloat($('[id^="length-input"]').eq(index).val().replace(/,/g, '')) || 0;
                        var sqmprice = parseFloat($('[id^="sqmprice-input"]').eq(index).val().replace(/,/g, '')) || 0;
                        var rollprice = parseFloat($('[id^="rollprice-input"]').eq(index).val().replace(/,/g, '')) || 0;
                        var unit = ($('[id^="unit-input"]').eq(index).val());
                        var manufacterer = ($('[id^="manufacterer-input"]').eq(index).val());
                        var supplier = ($('[id^="supplier-input"]').eq(index).val());

                        $.ajax({
                            type: 'POST',
                            url: server + '/api/bommasssavebommanagement',
                            dataType: 'json',
                            contentType: 'application/json',
                            data: JSON.stringify({
                                "savedate": insertdate,
                                "bomno": bomno,
                                "model": model,
                                "itemname": itemname,
                                "materialname": materialname,
                                "status": 'true',
                                "char": char,
                                "main": main,
                                "etc": etc,
                                "materialwidth": materialwidth,
                                "using": using,
                                "onepid": onepid,
                                "twopid": twopid,
                                "soyo": soyo,
                                "ta": ta,
                                "allta": allta,
                                "talength": talength,
                                "loss": loss,
                                "cost": cost,
                                "rlcut": rlcut,
                                "rlproduct": rlproduct,
                                "width": width,
                                "length": length,
                                "sqmprice": sqmprice,
                                "rollprice": rollprice,
                                "unit": unit,
                                "manufacterer": manufacterer,
                                "supplier": supplier,
                                // Add other properties as needed
                            }),
                            success: function (result) {
                                // Handle success
                            },
                            error: function (error) {
                                // Handle error
                            },
                        });
                    });

                    $('#overlay').fadeOut();
                    $('#editModal').fadeOut();
                    setTimeout(function () {
                        load()
                    }, 50);

                    var notification = $('<div class="notification"><img src="/img/테크온로고.PNG" alt="Notification Icon"><span class="notification-message" style="color:navy;">BOM정보 등록 완료</span></div>');
                    $('body').append(notification);
                    setTimeout(function () {
                        notification.fadeOut(function () {
                            $(this).remove();
                        });
                    }, 3000);
                } else {
                    return false;
                }
            } else {
                alert("빈 항목을 입력 바랍니다.");
            }
        }


    </script>


</body>

</html>