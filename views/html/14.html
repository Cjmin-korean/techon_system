<!DOCTYPE html>
<html lang="en">

<head>
    <title>EJ2 Grid</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Typescript Grid Control">
    <meta name="author" content="Syncfusion">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-base/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-grids/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-buttons/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-popups/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-navigations/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-dropdowns/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-lists/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-inputs/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-calendars/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/24.1.41/ej2-splitbuttons/styles/material.css" rel="stylesheet">

    <script src="https://cdn.syncfusion.com/ej2/24.1.41/dist/ej2.min.js" type="text/javascript"></script>
    <script src="https://cdn.syncfusion.com/ej2/syncfusion-helper.js" type="text/javascript"></script>
</head>

<body>

    <div id="container">
        <div id="Grid"></div>
    </div>

    <script>
        var server = '';
        let video_list = [];

        if (window.location.hostname == 'localhost') {
            server = 'http://localhost:8080';
        } else {
            server = 'http://techonmes.co.kr';
        }

        // 서버에서 데이터 받아오기
        $.ajax({
            type: 'POST',
            url: server + '/api/selectmaterialinformation',
            dataType: 'json',
            success: function (data) {
                // 받아온 데이터를 video_list에 할당
                video_list = data.reverse();

                // 나머지 코드 실행
                showList();

                // Initialize the Syncfusion Grid with the fetched data
                initializeGrid(video_list);
            }
        });

        function showList() {
            // Assuming you don't need to populate an HTML table, so this function is empty
        }

        function initializeGrid(data) {
            var grid = new ej.grids.Grid({
                dataSource: data,
                frozenColumns: 2,
                frozenRows: 1, // Number of header rows to be frozen
                // Number of columns to be frozen
                allowPaging: false,
                allowFiltering: true,
                allowSorting: true,
                filterSettings: { type: 'Excel', enableInfiniteScrolling: true, itemsCount: 40, loadingIndicator: 'Spinner' },
                columns: [
                    { field: 'codenumber', headerText: '품목코드', width: '200' },
                    { field: 'materialname', headerText: '자재명', width: '200' },
                    {
                        field: 'width', headerText: '전폭(mm)', width: '130', format: {
                            format: 'N',
                            useGrouping: true
                        }
                    },
                    {
                        field: 'length', headerText: '길이(M)', width: '150', format: {
                            format: 'N',
                            useGrouping: true
                        }
                    },
                    {
                        field: 'usewidth', headerText: '유효폭(mm)', width: '150', format: {
                            format: 'N',
                            useGrouping: true
                        }
                    },
                    {
                        field: 'sqmprice', headerText: 'SQM단가(￦)', width: '150', format: {
                            format: 'N',
                            useGrouping: true
                        }
                    },
                    {
                        field: 'rollprice', headerText: '롤단가(￦)', width: '150', format: {
                            format: 'N',
                            useGrouping: true
                        }
                    },
                    { field: 'unit', headerText: '단위', width: '150' },
                    { field: 'lifetime', headerText: '유수명(일)', width: '150' },
                    { field: 'num', headerText: '순번', width: '150' },
                    { field: 'manufacterer', headerText: '제조사', width: '150' },
                    { field: 'supplier', headerText: '공급사', width: '150' },
                    { field: 'usagecategory', headerText: '사용별', width: '150' },
                    { field: 'typecategory', headerText: '유형별', width: '150' },
                    { field: 'companycategory', headerText: '업체별', width: '150' },
                    { field: 'materialtype', headerText: '자재TYPE', width: '150' },
                    { field: 'color', headerText: '색상', width: '150' },
                    { field: 'thickness', headerText: '두께', width: '150' },
                    { field: 'adhesionstrength', headerText: '점착력', width: '150' },
                    { field: 'adhesive', headerText: '점착제', width: '150' },
                    { field: 'fabricweight', headerText: '원단무게(KG)', width: '150' },
                    { field: 'requester', headerText: '요청자', width: '150' },
                    { field: 'modificationdate', headerText: '최초수정날짜', width: '150' },
                    { field: 'registrationreason', headerText: '등록사유', width: '150' },
                    { field: 'customer', headerText: '고객사', width: '150' },
                    { field: 'modelname', headerText: '모델', width: '150' },



                ],
                pageSettings: { pageCount: 5 }
            });

            grid.appendTo('#Grid');
        }
    </script>

</body>

</html>