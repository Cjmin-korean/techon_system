<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>:: 모바일 카메라 액세스 ::</title>
    <style type="text/css">
        main {
            width: 100%;
            height: 100%;
            text-align: center;
        }

        #video-container {
            margin-top: 20px;
            position: relative;
            width: 100%;
        }

        #video {
            width: 100%;
        }

        #canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <main>
        <h1>모바일 카메라 액세스</h1>
        <div id="video-container">
            <video id="video" playsinline autoplay></video>
            <canvas id="canvas" hidden></canvas>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                const video = document.getElementById("video");
                const canvas = document.getElementById("canvas");
                const context = canvas.getContext('2d');

                video.srcObject = stream;
                video.onloadedmetadata = function (e) {
                    video.play();
                };

                const tick = function () {
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
                    requestAnimationFrame(tick);
                };

                tick();
            } catch (error) {
                console.error("카메라 액세스 거부:", error);
                // 사용자에게 카메라 액세스를 허용해야 한다는 메시지를 보여줄 수 있습니다.
            }
        });
    </script>
</body>

</html>
