<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta charset="UTF-8">
    <title>거래처정보</title>

    <link rel="stylesheet" href="/css/accountinformation.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.4/css/select.dataTables.min.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js" defer></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" defer></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js" defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"
        defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/select/1.3.4/js/dataTables.select.min.js"
        defer></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/pdfmake.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/vfs_fonts.js" defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"
        defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"
        defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"
        defer></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.colVis.min.js"
        defer></script>




</head>

<style>
    #marchine {
        width: 100%;
        /* padding: 2px 2px; */
        height: 30px;
        /* border: none; */
        border-radius: 4px;
        padding: auto;
        background-color: white;
    }
</style>

<body>

    <!-- <button onclick="adjustColumnWidths()">Adjust Column Widths</button> -->




    <!-- 모달수정창 -->
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">생산시작</h4>


                </div>
                <div class="modal-body">

                    <div class="form-group">
                        <label>모델명:</label>
                        <input type="text" class="form-control" id="modelname-edit" required>
                    </div>
                    <div class="form-group">
                        <label>제품명:</label>
                        <input type="text" class="form-control" id="itemname-edit" required>
                    </div>
                    <div class="form-group">
                        <label>생산lot:</label>
                        <input type="text" class="form-control" id="lot-edit" required>
                    </div>
                    <div class="form-group">
                        <label>생산설비:</label>
                        <select id="marchine">
                            <option value="고속1호기(3조)태경3232(이중)">고속1호기(3조)태경3232(이중)</option>
                            <option value="고속2호기(3조)태경3232">고속2호기(3조)태경3232</option>
                            <option value="고속3호기(3조)태경3232">고속3호기(3조)태경3232</option>
                            <option value="고속4호기(3조)태경3232">고속4호기(3조)태경3232</option>
                            <option value="고속5호기(3조)태경3232">고속5호기(3조)태경3232</option>
                            <option value="고속6호기(3조)태경3232">고속6호기(3조)태경3232</option>
                            <option value="고속7호기(5조)태경3232(이중)">고속7호기(5조)태경3232(이중)</option>
                            <option value="고속8호기(5조)태경3232(이중)">고속8호기(5조)태경3232(이중)</option>
                            <option value="고속9호기(5조)태경3232(이중)">고속9호기(5조)태경3232(이중)</option>
                            <option value="고속10호기(5조)태경4038(이중)">고속10호기(5조)태경4038(이중)</option>
                            <option value="고속11호기(5조)태경4038">고속11호기(5조)태경4038</option>
                            <option value="고속12호기(5조)태경4038">고속12호기(5조)태경4038</option>
                            <option value="고속13호기(5조)태경4038">고속13호기(5조)태경4038</option>
                            <option value="고속14호기(5조)태경4038(이중)">고속14호기(5조)태경4038(이중)</option>
                            <option value="고속15호기(5조)태경3838">고속15호기(5조)태경3838</option>
                            <option value="유압프레스(1호기)">유압프레스(1호기)</option>
                            <option value="유압프레스(2호기)">유압프레스(2호기)</option>
                            <option value="유압(3호기)">유압(3호기)</option>
                            <option value="유압6565(4호기)">유압6565(4호기)</option>
                        </select>
                    </div>

                    <table id="fileinfo11" class="display">
                        <thead>
                            <tr>
                                <th>자재명</th>
                                <th>자재폭</th>
                                <th>자재lot</th>
                                <th>수량</th>
                            </tr>
                        </thead>
                        <tbody id="fileinfobody">

                        </tbody>
                    </table>

                    <div class="form-group">

                        <input type="text" class="form-control" id="id-edit" style="visibility: hidden;" required>
                    </div>


                </div>

                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="취소">
                    <input type="button" data-dismiss="modal" id="dataedit" onclick="edtited()" class="btn btn-success"
                        value="생산시작">
                </div>
            </div>
        </div>
    </div>



    <!-- 모달수정창 -->
    <div class="modal fade" id="edit2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">생산종료</h4>


                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>BOMNO.:</label>
                        <input type="text" class="form-control" id="bomno-final" required>
                    </div>
                    <div class="form-group">
                        <label>모델명:</label>
                        <input type="text" class="form-control" id="modelname-final" required>
                    </div>
                    <div class="form-group">
                        <label>제품명:</label>
                        <input type="text" class="form-control" id="itemname-final" required>
                    </div>
                    <div class="form-group">
                        <label>생산lot:</label>
                        <input type="text" class="form-control" id="lot-final" required>
                    </div>
                    <div class="form-group">
                        <label>생산날짜:</label>
                        <input type="text" class="form-control" id="startdate-final" required>
                    </div>
                    <div class="form-group">
                        <label>타발수:</label>
                        <input type="text" class="form-control" id="touch-final" required>
                    </div>


                    <table id="fileinfo12" class="display">
                        <thead>
                            <tr>
                                <th>자재명</th>
                                <th>자재폭</th>
                                <th>자재lot</th>
                                <th>반납수량(M)</th>
                            </tr>
                        </thead>
                        <tbody id="fileinfobody12">

                        </tbody>
                    </table>
                    <div class="form-group">
                        <label>반납자재합계:</label>
                        <input type="text" class="form-control" id="outputmaterial" value="0" required readonly>
                    </div>
                    <div class="form-group">

                        <input type="text" class="form-control" id="id-final" style="visibility: hidden;" required>
                    </div>


                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="취소">
                    <input type="button" data-dismiss="modal" onclick="edtited2()" id="dataedit2"
                        class="btn btn-success" value="생산종료">
                </div>
            </div>
        </div>
    </div>


    <div style="height:50px; ">
        <p style="margin-left:20px; margin-top:20px; font-size: 20px; font-weight: bold;">
            생산현황


        </p>


    </div>
    <!-- 
    <div style="width:100%; height:40px; border: 1px solid black;">
        <button type="button" class="btn btn-primary" id="openModal" style="margin-top:2px;"> 신규등록 </button>
    </div> -->

    <div style="border: 1px solid whitesmoke;">
        <table id="fileinfo" class="display" style="width:100%">
            <thead>
                <tr>
                    <th></th>
                    <th>생산계획날짜</th>
                    <th>BOMNO.</th>
                    <th>모델명</th>
                    <th>제품명</th>
                    <th>생산lotno.</th>
                    <th>지시수량</th>
                    <th>생산시작날짜</th>
                    <th>생산시작시간</th>
                    <th>생산종료시간</th>
                    <th>생산설비</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <div id="loading-screen">
        <div class="spinner"></div>
        <p style="color: black;">잠시만 기다려주세요...</p>
    </div>
    <script type="text/javascript">
        // 시작부분
        var server = '';
        console.log(window.location.hostname)

        if (window.location.hostname == 'localhost') {
            server = 'http://localhost:8080';
            // server = 'http://techonmes.co.kr';

        } else {
            server = 'http://techonmes.co.kr';
        }

        $(document).ready(function () {


            // 로딩 창을 보이게 한다
            const loadingScreen = document.getElementById("loading-screen");
            loadingScreen.style.display = "block";

            $("#openModal").click(function () {
                $("#accountcode-save").val('');
                $("#accountname-save").val('');
                $("#accountrepresentname-save").val('');
                $("#phone-save").val('');
                $("#adress-save").val('');
                $("#myModal").modal();
            });

            $('#fileinfo').on('click', '#openModaledit', function () {
                var str = "";
                var tdArr = new Array();// 배열 선언            
                var checkBtn = $(this);

                var tr = checkBtn.parent().parent();
                var td = tr.children();

                var accountcode = td.eq(0).text();
                var accountname = td.eq(1).text();
                var accountrepresentname = td.eq(2).text();
                var phone = td.eq(3).text();
                var adress = td.eq(4).text();
                table1 = $('#fileinfo').DataTable();
                var data1 = table1.row($(this).parents('tr')).data(); // getting 

                $('#modelname-edit').val(data1.modelname);
                $('#itemname-edit').val(data1.itemname);
                $('#lot-edit').val(data1.lotno);
                $('#id-edit').val(data1.id);
                $("#edit").modal();


            });


            $('#fileinfo').on('click', '#openModaledit2', function () {
                var str = "";
                var tdArr = new Array();// 배열 선언            
                var checkBtn = $(this);

                var tr = checkBtn.parent().parent();
                var td = tr.children();

                var accountcode = td.eq(0).text();
                var accountname = td.eq(1).text();
                var accountrepresentname = td.eq(2).text();
                var phone = td.eq(3).text();
                var adress = td.eq(4).text();
                table1 = $('#fileinfo').DataTable();
                var data1 = table1.row($(this).parents('tr')).data(); // getting 
                $('#bomno-final').val(data1.bomno);
                $('#modelname-final').val(data1.modelname);
                $('#itemname-final').val(data1.itemname);
                $('#startdate-final').val(data1.startdate);
                $('#lot-final').val(data1.lotno);
                $('#id-final').val(data1.id);

                $("#edit2").modal();

            });


            $('#fileinfo').on('click', '#openModaldelete', function () {
                table1 = $('#fileinfo').DataTable();
                var data1 = table1.row($(this).parents('tr')).data(); // getting 

                $('#id-delete').val(data1.id);
                $("#datadelte").modal();

            });
            $.ajax({
                // url: server + '/api/accountmanagement',
                url: server + '/api/productorderlist3',
                method: 'post',
                dataType: 'json',
                success: function (data) {
                    $('#fileinfo').DataTable({
                        deferLoading: [0, 10],
                        paging: true,
                        destroy: true,
                        sort: true,
                        pageLength: 10,
                        searching: true,
                        data: data,
                        responsive: true,
                        columnResize: true,

                        processing: true,
                        columns: [


                            //     " select "+
                            //    " id, "+
                            //    " modelname, "+
                            //    " itemname, "+
                            //    " lotno, "+
                            //    " quantity, "+
                            //    " startdate, "+
                            //    " starttime, "+
                            //    " finaltime, "+
                            //    " marchine "+

                            //    " from  "+
                            //    " orderlist ")


                            { "data": "id" },
                            { "data": "productdate" },
                            { "data": "bomno" },
                            { "data": "modelname" },
                            { "data": "itemname" },
                            { "data": "lotno" },
                            { "data": "quantity" },
                            { "data": "startdate" },
                            { "data": "starttime" },
                            { "data": "finaltime" },
                            { "data": "marchine" },


                        ],
                        fixedColumns: {
                            leftColumns: 1
                        },
                        // dom: 'flrtBip',

                        // buttons: [
                        //     'copy', 'csv', 'excel', 'pdf', 'print'
                        // ],

                        columnDefs: [
                            {
                                targets: 0, visible: false, searchable: false
                            },
                            {
                                targets: 11,
                                data: null,
                                defaultContent: '<button id="openModaledit" class="btn btn-primary" > 시작 </button>',
                                width: 50
                            },
                            {
                                targets: 12,
                                data: null,
                                defaultContent: '<button id="openModaledit2" class="btn btn-primary" style="background-color:red;"  > 종료 </button>',

                                width: 50
                            }

                        ],

                        language: {
                            emptyTable: "데이터가 없습니다.",
                            lengthMenu: "페이지당 _MENU_ 개씩 보기",
                            info: "현재 _START_ - _END_ / _TOTAL_건",
                            infoEmpty: "데이터 없음",
                            infoFiltered: "( _MAX_건의 데이터에서 필터링됨 )",
                            search: "검색:",
                            zeroRecords: "일치하는 데이터가 없습니다.",
                            loadingRecords: "로딩중...",
                            processing: "잠시만 기다려 주세요.",
                            paginate: {
                                next: "다음",
                                previous: "이전"
                            }
                        },


                    });
                    // 컬럼 헤더 셀을 가운데 정렬하는 CSS를 추가
                    $('.sorting').css('text-align', 'center');
                },
                error: function () {
                    alert("다시 시도해 주십시요.");
                },

                complete: setTimeout(function () {
                    const loadingScreen = document.getElementById("loading-screen");
                    loadingScreen.style.display = "none";
                }, 1500)
            });

        });





        // 삭제부분

        // 수정부분
        // document.getElementById("dataedit").addEventListener('click', edtited);

        function edtited() {


            var today = new Date();
            var now = new Date();	// 현재 날짜 및 시간
            var year = today.getFullYear();
            var month = ('0' + (today.getMonth() + 1)).slice(-2);
            var day = ('0' + today.getDate()).slice(-2);
            var hours = now.getHours();	// 시간
            var minutes = now.getMinutes();	// 분
            var seconds = now.getSeconds();	// 초

            $.ajax({
                type: 'POST',
                url: server + '/api/startproduct',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify({

                    id: $('#id-edit').val(),
                    marchine: $('#marchine').val(),
                    startdate: year + "-" + month + "-" + day,
                    starttime: hours + ":" + minutes + ":" + seconds




                }),
                success: function (result) {
                    console.log(result)
                }
            })



            alert("생산시작하십시오.");


            $.ajax({
                // url: server + '/api/accountmanagement',
                url: server + '/api/productorderlist3',
                method: 'post',
                dataType: 'json',
                success: function (data) {
                    $('#fileinfo').DataTable({
                        deferLoading: [0, 10],
                        paging: true,
                        destroy: true,
                        sort: true,
                        pageLength: 10,
                        searching: true,
                        data: data,
                        responsive: true,
                        columnResize: true,

                        processing: true,
                        columns: [


                            //     " select "+
                            //    " id, "+
                            //    " modelname, "+
                            //    " itemname, "+
                            //    " lotno, "+
                            //    " quantity, "+
                            //    " startdate, "+
                            //    " starttime, "+
                            //    " finaltime, "+
                            //    " marchine "+

                            //    " from  "+
                            //    " orderlist ")


                            { "data": "id" },
                            { "data": "productdate" },
                            { "data": "bomno" },
                            { "data": "modelname" },
                            { "data": "itemname" },
                            { "data": "lotno" },
                            { "data": "quantity" },
                            { "data": "startdate" },
                            { "data": "starttime" },
                            { "data": "finaltime" },
                            { "data": "marchine" },


                        ],
                        fixedColumns: {
                            leftColumns: 1
                        },
                        // dom: 'flrtBip',

                        // buttons: [
                        //     'copy', 'csv', 'excel', 'pdf', 'print'
                        // ],

                        columnDefs: [
                            {
                                targets: 0, visible: false, searchable: false
                            },
                            {
                                targets: 11,
                                data: null,
                                defaultContent: '<button id="openModaledit" class="btn btn-primary" > 시작 </button>',
                                width: 50
                            },
                            {
                                targets: 12,
                                data: null,
                                defaultContent: '<button id="openModaledit2" class="btn btn-primary" style="background-color:red;"  > 종료 </button>',

                                width: 50
                            }

                        ],

                        language: {
                            emptyTable: "데이터가 없습니다.",
                            lengthMenu: "페이지당 _MENU_ 개씩 보기",
                            info: "현재 _START_ - _END_ / _TOTAL_건",
                            infoEmpty: "데이터 없음",
                            infoFiltered: "( _MAX_건의 데이터에서 필터링됨 )",
                            search: "검색:",
                            zeroRecords: "일치하는 데이터가 없습니다.",
                            loadingRecords: "로딩중...",
                            processing: "잠시만 기다려 주세요.",
                            paginate: {
                                next: "다음",
                                previous: "이전"
                            }
                        },


                    });
                    // 컬럼 헤더 셀을 가운데 정렬하는 CSS를 추가
                    $('.sorting').css('text-align', 'center');
                },
                error: function () {
                    alert("다시 시도해 주십시요.");
                },

                complete: setTimeout(function () {
                    const loadingScreen = document.getElementById("loading-screen");
                    loadingScreen.style.display = "none";
                }, 1500)
            });

        }

        // 수정부분
        // document.getElementById("dataedit2").addEventListener('click', edtited2);

        function edtited2() {


            var today = new Date();
            var now = new Date();	// 현재 날짜 및 시간
            var year = today.getFullYear();
            var month = ('0' + (today.getMonth() + 1)).slice(-2);
            var day = ('0' + today.getDate()).slice(-2);
            var hours = now.getHours();	// 시간
            var minutes = now.getMinutes();	// 분
            var seconds = now.getSeconds();	// 초

            $.ajax({
                type: 'POST',
                url: server + '/api/finishproduct',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify({

                    id: $('#id-final').val(),
                    touch: $('#touch-final').val(),
                    finaltime: hours + ":" + minutes + ":" + seconds




                }),
                success: function (result) {
                    console.log(result)
                }
            })

            $.ajax({
                type: 'POST',
                url: server + '/api/orderlistmaterialoutput',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify({

                    lotno: $('#lot-final').val(),
                    materialoutput: $('#outputmaterial').val(),
                }),
                success: function (result) {
                    console.log(result)
                }
            })


            alert("생산이 종료 되었습니다.");

            $.ajax({
                type: 'POST',
                url: server + '/api/inputalltest',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify({

                    //     .input('bomno', sql.NVarChar, req.body.bom)
                    // .input('modelname', sql.NVarChar, req.body.modelname)
                    // .input('itemname', sql.NVarChar, req.body.itemname)
                    // .input('lotno', sql.NVarChar, req.body.lotno)
                    // .input('startdate', sql.NVarChar, req.body.startdate)
                    // .input('quantity', sql.NVarChar, req.body.quantity)
                    bomno: $('#bomno-final').val(),
                    modelname: $('#modelname-final').val(),
                    itemname: $('#itemname-final').val(),
                    lotno: $('#lot-final').val(),
                    startdate: $('#startdate-final').val(),
                    quantity: $('#touch-final').val(),





                }),
                success: function (result) {
                    console.log(result)
                }
            })
            $.ajax({
                // url: server + '/api/accountmanagement',
                url: server + '/api/productorderlist3',
                method: 'post',
                dataType: 'json',
                success: function (data) {
                    $('#fileinfo').DataTable({
                        deferLoading: [0, 10],
                        paging: true,
                        destroy: true,
                        sort: true,
                        pageLength: 10,
                        searching: true,
                        data: data,
                        responsive: true,
                        columnResize: true,

                        processing: true,
                        columns: [


                            //     " select "+
                            //    " id, "+
                            //    " modelname, "+
                            //    " itemname, "+
                            //    " lotno, "+
                            //    " quantity, "+
                            //    " startdate, "+
                            //    " starttime, "+
                            //    " finaltime, "+
                            //    " marchine "+

                            //    " from  "+
                            //    " orderlist ")


                            { "data": "id" },
                            { "data": "productdate" },
                            { "data": "bomno" },
                            { "data": "modelname" },
                            { "data": "itemname" },
                            { "data": "lotno" },
                            { "data": "quantity" },
                            { "data": "startdate" },
                            { "data": "starttime" },
                            { "data": "finaltime" },
                            { "data": "marchine" },


                        ],
                        fixedColumns: {
                            leftColumns: 1
                        },
                        // dom: 'flrtBip',

                        // buttons: [
                        //     'copy', 'csv', 'excel', 'pdf', 'print'
                        // ],

                        columnDefs: [
                            {
                                targets: 0, visible: false, searchable: false
                            },
                            {
                                targets: 11,
                                data: null,
                                defaultContent: '<button id="openModaledit" class="btn btn-primary" > 시작 </button>',
                                width: 50
                            },
                            {
                                targets: 12,
                                data: null,
                                defaultContent: '<button id="openModaledit2" class="btn btn-primary" style="background-color:red;"  > 종료 </button>',

                                width: 50
                            }

                        ],

                        language: {
                            emptyTable: "데이터가 없습니다.",
                            lengthMenu: "페이지당 _MENU_ 개씩 보기",
                            info: "현재 _START_ - _END_ / _TOTAL_건",
                            infoEmpty: "데이터 없음",
                            infoFiltered: "( _MAX_건의 데이터에서 필터링됨 )",
                            search: "검색:",
                            zeroRecords: "일치하는 데이터가 없습니다.",
                            loadingRecords: "로딩중...",
                            processing: "잠시만 기다려 주세요.",
                            paginate: {
                                next: "다음",
                                previous: "이전"
                            }
                        },


                    });
                    // 컬럼 헤더 셀을 가운데 정렬하는 CSS를 추가
                    $('.sorting').css('text-align', 'center');
                },
                error: function () {
                    alert("다시 시도해 주십시요.");
                },

                complete: setTimeout(function () {
                    const loadingScreen = document.getElementById("loading-screen");
                    loadingScreen.style.display = "none";
                }, 1500)
            });

        }

    </script>

    <script type="text/javascript">


        // $('#fileinfo tbody').on('click', '#editbutton', function () {
        //     table1 = $('#fileinfo').DataTable();
        //     var data1 = table1.row($(this).parents('tr')).data(); // getting 

        //     $('#accountcode-edit').val(data1.accountcode);
        //     $('#accountname-edit').val(data1.accountname);
        //     $('#representativename-edit').val(data1.representativename);
        //     $('#phone-edit').val(data1.phone);
        //     $('#adress-edit').val(data1.adress);


        //     $("#edit").modal("show");

        // });
        function modalsave() {
            $('#accountcode-save').val('');
            $('#accountname-save').val('');
            $('#representativename-save').val('');
            $('#phone-save').val('');
            $('#adress-save').val('');


            $("#myModalsave").modal("show");
        }

        $('#find').click(function () {


        });
    </script>

    <script>
        //var tables = document.getElementsByClassName('flexiCol');
        var tables = document.getElementsByTagName('table');
        for (var i = 0; i < tables.length; i++) {
            resizableGrid(tables[i]);
        }

        function resizableGrid(table) {
            var row = table.getElementsByTagName('tr')[0],
                cols = row ? row.children : undefined;
            if (!cols) return;

            table.style.overflow = 'hidden';

            var tableHeight = table.offsetHeight;

            for (var i = 0; i < cols.length; i++) {
                var div = createDiv(tableHeight);
                cols[i].appendChild(div);
                cols[i].style.position = 'relative';
                setListeners(div);
            }

            function setListeners(div) {
                var pageX, curCol, nxtCol, curColWidth, nxtColWidth;

                div.addEventListener('mousedown', function (e) {
                    curCol = e.target.parentElement;
                    nxtCol = curCol.nextElementSibling;
                    pageX = e.pageX;

                    var padding = paddingDiff(curCol);

                    curColWidth = curCol.offsetWidth - padding;
                    if (nxtCol)
                        nxtColWidth = nxtCol.offsetWidth - padding;
                });

                div.addEventListener('mouseover', function (e) {
                    e.target.style.borderRight = '2px solid #0000ff';
                })

                div.addEventListener('mouseout', function (e) {
                    e.target.style.borderRight = '';
                })

                document.addEventListener('mousemove', function (e) {
                    if (curCol) {
                        var diffX = e.pageX - pageX;

                        if (nxtCol)
                            nxtCol.style.width = (nxtColWidth - (diffX)) + 'px';

                        curCol.style.width = (curColWidth + diffX) + 'px';
                    }
                });

                document.addEventListener('mouseup', function (e) {
                    curCol = undefined;
                    nxtCol = undefined;
                    pageX = undefined;
                    nxtColWidth = undefined;
                    curColWidth = undefined
                });
            }

            function createDiv(height) {
                var div = document.createElement('div');
                div.style.top = 0;
                div.style.right = 0;
                div.style.width = '5px';
                div.style.position = 'absolute';
                div.style.cursor = 'col-resize';
                div.style.userSelect = 'none';
                div.style.height = height + 'px';
                return div;
            }

            function paddingDiff(col) {

                if (getStyleVal(col, 'box-sizing') == 'border-box') {
                    return 0;
                }

                var padLeft = getStyleVal(col, 'padding-left');
                var padRight = getStyleVal(col, 'padding-right');
                return (parseInt(padLeft) + parseInt(padRight));

            }

            function getStyleVal(elm, css) {
                return (window.getComputedStyle(elm, null).getPropertyValue(css))
            }
        };
    </script>
    <script>
        $('#fileinfo').on('click', '#openModaledit', function () {
            console.log(11)

            var str = "";
            var tdArr = new Array();// 배열 선언            
            var checkBtn = $(this);

            var tr = checkBtn.parent().parent();
            var td = tr.children();

            var contents = td.eq(4).text();

            console.log(contents)


            $.ajax({
                url: server + '/api/productcontent',
                method: 'post',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify({
                    contents: contents
                }),
                success: function (data) {
                    console.log(data)
                    $('#fileinfobody').empty()
                    for (var i = 0; i < data.length; i++) {

                        $('#fileinfo11').append(
                            '<tr>' +


                            '<td >' + data[i].materialname + '</td>' +
                            '<td >' + data[i].materialwidth + '</td>' +
                            '<td >' + data[i].lotno + '</td>' +
                            '<td >' + data[i].quantity + '</td>' +



                            '</tr>'

                        )
                    }



                }


            });
        })


        $('#fileinfo').on('click', '#openModaledit2', function () {
            console.log(11)

            var str = "";
            var tdArr = new Array();// 배열 선언            
            var checkBtn = $(this);

            var tr = checkBtn.parent().parent();
            var td = tr.children();

            var contents = td.eq(4).text();

            console.log(contents)


            $.ajax({
                url: server + '/api/productcontent',
                method: 'post',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify({
                    contents: contents
                }),
                success: function (data) {
                    console.log(data)
                    $('#fileinfobody12').empty()
                    for (var i = 0; i < data.length; i++) {

                        $('#fileinfo12').append(
                            '<tr>' +


                            '<td >' + data[i].materialname + '</td>' +
                            '<td >' + data[i].materialwidth + '</td>' +
                            '<td >' + data[i].lotno + '</td>' +
                            '<td ><input type="text" value="0" class="form-control" onchange="sum()" id="sum' + i + '"></td>' +



                            '</tr>'

                        )
                    }



                }


            });
        })
        function sum() {
            var sum1 = parseInt(document.getElementById('sum0').value);
            var sum2 = parseInt(document.getElementById('sum1').value);
            var sum = sum1 + sum2;
            $('#outputmaterial').val(sum)
        }
    </script>

</html>